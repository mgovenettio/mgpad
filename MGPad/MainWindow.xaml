<Window x:Class="MGPad.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MGPad"
        Title="MGPad"
        Height="450"
        Width="800"
        Closing="MainWindow_Closing">
    <Window.InputBindings>
        <KeyBinding Command="ApplicationCommands.SaveAs"
                    Key="S"
                    Modifiers="Control,Shift" />
        <KeyBinding Modifiers="Control" Key="B" Command="{x:Static local:MainWindow.ToggleBoldCommand}" />
        <KeyBinding Modifiers="Control" Key="U" Command="{x:Static local:MainWindow.ToggleUnderlineCommand}" />
        <KeyBinding Command="{x:Static local:MainWindow.ToggleInputLanguageCommand}"
                    Modifiers="Control"
                    Key="J" />
    </Window.InputBindings>
    <Window.CommandBindings>
        <CommandBinding Command="ApplicationCommands.New"
                        CanExecute="FileCommand_CanExecute"
                        Executed="FileNewCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.Open"
                        CanExecute="FileCommand_CanExecute"
                        Executed="FileOpenCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.Save"
                        CanExecute="FileCommand_CanExecute"
                        Executed="FileSaveCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.SaveAs"
                        CanExecute="FileCommand_CanExecute"
                        Executed="FileSaveAsCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.Close"
                        CanExecute="FileCommand_CanExecute"
                        Executed="FileCloseCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.Undo"
                        CanExecute="EditorCommand_CanExecute"
                        Executed="EditorCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.Redo"
                        CanExecute="EditorCommand_CanExecute"
                        Executed="EditorCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.Cut"
                        CanExecute="EditorCommand_CanExecute"
                        Executed="EditorCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.Copy"
                        CanExecute="EditorCommand_CanExecute"
                        Executed="EditorCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.Paste"
                        CanExecute="EditorCommand_CanExecute"
                        Executed="EditorCommand_Executed" />
        <CommandBinding Command="ApplicationCommands.SelectAll"
                        CanExecute="EditorCommand_CanExecute"
                        Executed="EditorCommand_Executed" />
    </Window.CommandBindings>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Menu Grid.Row="0">
            <MenuItem Header="_File">
                <MenuItem Header="_New" Click="FileNew_Click" InputGestureText="Ctrl+N" />
                <MenuItem Header="_Open..." Click="FileOpen_Click" InputGestureText="Ctrl+O" />
                <MenuItem Header="_Save" Click="FileSave_Click" InputGestureText="Ctrl+S" />
                <MenuItem Header="Save _As..." Click="FileSaveAs_Click" InputGestureText="Ctrl+Shift+S" />
                <Separator />
                <MenuItem Header="E_xit" Click="FileExit_Click" />
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Command="ApplicationCommands.Undo" Header="_Undo" CommandTarget="{Binding ElementName=EditorBox}" />
                <MenuItem Command="ApplicationCommands.Redo" Header="_Redo" CommandTarget="{Binding ElementName=EditorBox}" />
                <Separator />
                <MenuItem Command="ApplicationCommands.Cut" Header="Cu_t" CommandTarget="{Binding ElementName=EditorBox}" />
                <MenuItem Command="ApplicationCommands.Copy" Header="_Copy" CommandTarget="{Binding ElementName=EditorBox}" />
                <MenuItem Command="ApplicationCommands.Paste" Header="_Paste" CommandTarget="{Binding ElementName=EditorBox}" />
                <Separator />
                <MenuItem Command="ApplicationCommands.SelectAll" Header="Select _All" CommandTarget="{Binding ElementName=EditorBox}" />
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem x:Name="MarkdownModeMenuItem"
                          Header="_Markdown Mode"
                          IsCheckable="true"
                          Click="MarkdownModeMenuItem_Click" />
            </MenuItem>
            <MenuItem Header="F_ormat" />
            <MenuItem Header="_Tools" />
            <MenuItem Header="_Help" />
        </Menu>
        <ToolBarTray Grid.Row="1">
            <ToolBar>
                <Button x:Name="BoldButton" Content="B" Click="BoldButton_Click" />
                <Button x:Name="UnderlineButton" Content="U" Click="UnderlineButton_Click" />
                <Button x:Name="ToggleLanguageButton"
                        Content="JP/EN"
                        Click="ToggleLanguageButton_Click" />
                <Button Content="TS" />
            </ToolBar>
        </ToolBarTray>

        <Border Grid.Row="2" BorderThickness="1" BorderBrush="LightGray" Margin="5" Padding="5">
            <Grid x:Name="EditorRegionGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="0" />
                </Grid.ColumnDefinitions>

                <RichTextBox x:Name="EditorBox"
                             Grid.Column="0"
                             VerticalScrollBarVisibility="Auto"
                             TextChanged="EditorBox_TextChanged" />

                <Border Grid.Column="1"
                        x:Name="MarkdownPreviewContainer"
                        Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <TextBlock x:Name="MarkdownPreviewTextBlock"
                                   Text="Markdown preview"
                                   TextWrapping="Wrap"
                                   Margin="8" />
                    </ScrollViewer>
                </Border>
            </Grid>
        </Border>

        <StatusBar Grid.Row="3">
            <StatusBarItem>
                <TextBlock x:Name="FileNameTextBlock" Text="Untitled" />
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock x:Name="LanguageIndicatorTextBlock" Text="EN" />
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
